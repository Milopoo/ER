window.onload=function()
{
    var c=document.getElementById('canvas')
    var ctx=c.getContext('2d');
    var agente=c.getContext('2d');
    var recorrido=c.getContext('2d');
    
    var maze1=[
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        ]
        var maze2=[
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,1,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
[0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
[0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0],
[0,0,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0],
[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
[0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1,0,0,0],
[0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,1,0,0,0],
[0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,0,0,0,0,1,0,0,0],
[0,0,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0],
[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,1,1,1,1,0,0,0],
[0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
]
var maze3=[
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0],
        [0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,0,0,1,1,1,1,,1,11,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        ]
    var ras=0;
    var Mapa=0;
    var MovY=0;
    var MovX=canvas.width/2;
    var c1=0,c2=0,c3=0,c4 =0;
    var direccionY=0, direccionX=0;
    ctx.strokesStyle='#FF0000';
    ctx.lineWidth=1;
    var mov=false;
    Mapa=maze1;
    $(document).ready(function(){

        $("#titulo").click(function(){
            if(mov==true){mov=false;}else{mov=true}
            
        });
        $("#Mapas").click(function(){
              Mapa=maze1;
              ctx.clearRect(0,0, canvas.width,canvas.height);
        });
        $("#Mapas2").click(function(){
            Mapa=maze2;
            ctx.clearRect(0,0, canvas.width,canvas.height);
      });
      $("#Mapas3").click(function(){
        Mapa=maze3;
        ctx.clearRect(0,0, canvas.width,canvas.height);
  });

    });

    
    
  
    setInterval(function(){Loop();},200); //300
    function Loop(){
        Obstaculo(Mapa);
        recorrido.fillStyle="#00bbff";
        recorrido.fillRect(direccionX,direccionY,50,50);
        direccionY=MovY;
        direccionX=MovX;
        
        agente.fillStyle="#264abf";
        agente.fillRect(direccionX,direccionY,50,50);
        
        acciones();
        comparacion(Mapa); 
        
        
        ctx.stroke();
        ctx.fill();
      
    }

    function Obstaculo(mapa){
        
        for(var y=0;y< 16 ;y++){
        for(var x=0;x< 24;x++){
            if(mapa[y][x]===1){
                ctx.fillStyle="black";
                ctx.fillRect(x*50,y*50,50,50);
            }
            
    } 
    }
    }
     function comparacion(mapa){  //Caracteristicas
        
         var posX =(MovX/50);
         var posY =(MovY/50);

         if(MovY==800){
            MovY=0;
            posY=0;
            MovX=MovX+50; 
        }
        if(MovX>1199){
            //MovY=0;
            MovX=0; 
        } 
        if(MovX<0){
            //MovY=0;
            MovX=1150; 
        }
     
        var a1=posY-1;
        var a2=posX-1;
        var b1=posY+1;
        var b2=posX+1;

        if(a1<0){
            a1=0;
        }
        
        if(b1<15){
            b1=0;
        }
    
                  if(mapa[a1][a2]==1 || mapa[posY][a2]==1){
             c4=1;
             
         }
          if(mapa[a1][posX]===1 || mapa[a1][posX+1]===1){
             c1=1;
         }
          if(mapa[posY][posX+1]==1 || mapa[b1][posX+1]==1){
             c2=1;
         }
          if(mapa[posY+1][posX]===1 || mapa[posY+1][a2]===1){
             c3=1;
         }
        
       
        
    

     }
     function acciones(){
       
          if(c1==1 && c2==0){
            MovX=MovX+50;
            c1=0;c2=0;c3=0;c4=0;
        }
       else if(c2==1 && c3==0){
            MovY=MovY+50;
            c1=0;c2=0;c3=0;c4=0;
        }
        else if(c3==1 && c4==0){
            MovX=MovX-50;
            c1=0;c2=0;c3=0;c4=0;
        }
        else if (c4==1 && c1==0){
            MovY=MovY-50;
            c1=0;c2=0;c3=0;c4=0;

           
        }else if(c1==0 && c2==0 && c3==0 && c4==0){
            if(mov==true){ MovY=MovY+50;}
            else{MovY=MovY}
             
        }
        
        
        
     } // acciones del agente
    for(i=0; i<=1200; i=i+50){
        ctx.moveTo(i,0);
        ctx.lineTo(i,1200);
        ctx.stroke();
    }
    for(j=0; j<=800; j=j+50){
        ctx.moveTo(0,j);
        ctx.lineTo(1200,j);
        ctx.stroke();
    }
   


}